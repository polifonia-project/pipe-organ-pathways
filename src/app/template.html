<div class="container-fluid"> 
    <button class="btn btn-outline-dark" (click)="mode=1">Slow Looking</button>
    <button class="btn btn-outline-dark" (click)="mode=2">Management</button>
    <button class="btn btn-outline-dark" (click)="mode=3">Other People</button>
    <button class="btn btn-outline-dark" (click)="mode=4">Authoring</button>
    <button class="btn btn-outline-dark" (click)="mode=5">Themes</button>

    <div [ngSwitch]="mode">  
        <div *ngSwitchCase="1">
            <nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark hidenav">
                <a class="navbar-brand" href="#">IMMA Slow Looking</a>
            </nav>
            <div *ngIf="!(slowLookingScript>0)">
                <div><img class="col-sm-12" src="assets/img/IMMA30_LOGO_RGB_small.png"></div>
                <p class="lead">Weclome to IMMA Slow Looking. Dive deeper into IMMA artworks. Share your own responses to IMMA artworks and view the responses of others.</p>
                
                <h2>Find Out More</h2>
                <p>Weclome to IMMA Slow Looking. Look closely at these IMMA artworks and develop your own interpretation. How do you view these artworks? How do other people view them?</p> 
                <p>Below are some Slow Looking activities. Each one focusses on a particular IMMA artwork. Each Slow Looking activity helps you to look deeper, find out more about the artwork and develop you own interpretation.</p>
                <p>Within each activity you may have the opportunity to share your response with IMMA, send it to friends and family as well as keep a copy for yourself as a momento of your experience.</p>
                <p>There is a link to the public display of shared Slow Looking responses in the Other People section of this page. But first, try some Slow Looking activities for yourself.</p>
                
                <h2>Take Part</h2>
                <p>The Slow Looking activities are organised into the themes below. Select a theme to view the Slow Looking activities. Each activity is based around a particular artwork in the IMMA collection. Tap on the artwork image to try the Slow Looking activity.</p>
                <div class="row">

                    <div *ngFor="let theme of getThemes(); let i = index">
                        <div class="accordion " id="accordionFlushExample">
                            <div class="accordion-item">
                            <h2 class="accordion-header" id="{{'heading_' + theme.id}}">
                                <button 
                                    class="accordion-button collapsed" 
                                    type="button" 
                                    data-bs-toggle="collapse" 
                                    [attr.data-bs-target]="'#collapse_' + theme.id"
                                    aria-expanded="false" 
                                    [attr.aria-controls]="'collapse_'+ theme.id">
                                    <div><strong>{{theme.name}}</strong><br/>
                                    {{theme.description}}
                                    </div>
                                </button>
                            </h2>
                            <div 
                                id="{{'collapse_' + theme.id}}" 
                                class="accordion-collapse collapse" 
                                [attr.aria-labelledby]="'heading_' + theme.id"
                                data-bs-parent="#accordionFlushExample">
                                <div class="accordion-body">
                                    <div *ngFor="let script of getScriptsOfTheme(theme.id); let i = index" class="col-sm-12 pb-4">
                                        <h5 class="col-sm-12">{{script.name}}</h5> 
                                        <div>
                                            <img (click)="setSlowLookingScript(script.id)" class="col-sm-12" src="{{script.artwork.fileLocation}}" >
                                        </div>
                                        <div class="col-sm-12"><strong>{{script.artwork.name}}</strong></div>
                                        <div class="col-sm-12">{{script.artwork.artist}}</div>
                                        <div class="col-sm-12">{{script.artwork.year}}</div>
                                    </div>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>

                </div><br/>
                <h2>Other People</h2>
                <button class="m-3 btn btn-warning" (click)="mode=3">Find out how others have responded to these artworks</button>
            </div>

            <div *ngIf="slowLookingScript>0">
                <div *ngFor="let stage of getScript(slowLookingScript).stages; let i = index">
                    <div *ngIf="slowLookingCurrentScriptStageIndex == i">
                        <div *ngIf="stage.type == 'welcome'">  
                            <h5>{{stage.title}}</h5>
                            <p>{{stage.body}}</p>
                            <span *ngIf="slowLookingMaximumScriptStageIndex == i">
                                <div class="text-center">
                                    <button class="m-3 btn btn-warning" (click)="slowLookingScript=0">Return to the list of Slow Looking activities</button>
                                </div>
                            </span>
                            <span *ngIf="slowLookingMaximumScriptStageIndex != i">
                                <div class="text-right">
                                    <button  class="m-3 btn btn-warning" (click)="slowLookingCurrentScriptStageIndex=i+1; ">Continue</button>
                                </div>
                            </span>
                        </div>
                        <div *ngIf="stage.type == 'context'">  
                            <h5>{{stage.title}}</h5>
                            <p>{{stage.body}}</p>
                            <span *ngIf="slowLookingMaximumScriptStageIndex == i">
                                <div class="text-center">
                                    <button class="m-3 btn btn-warning" (click)="slowLookingScript=0">Return to the list of Slow Looking activities</button>
                                </div>
                            </span>
                            <span *ngIf="slowLookingMaximumScriptStageIndex != i">
                                <div class="text-right">
                                    <button class="m-3 btn btn-warning" (click)="slowLookingCurrentScriptStageIndex=i+1; ">Continue</button>
                                </div>
                            </span>
                        </div>
                        <div *ngIf="stage.type == 'question'"> 
                            <div class="form-group">
                                <!-- initialise a new action and add its stage and question  -->
                                {{intialiseQuestionAction(stage, stage.body)}}

                                <!-- show title and question  -->
                                <h5>{{stage.title}}</h5>
                                <p>{{stage.body}}</p>
                                <div *ngIf="stage.help">
                                    <span style="float:right"><img width="20" style="background-color:white;" src="assets/img/question-help.png" (click)="toggleQuestionHelp()"></span>
                                    <span style="float:left"*ngIf="showQuestionHelp">{{stage.help}}</span>
                                </div>
                                <!-- get the answer -->
                                <textarea rows="3" class="form-control" [(ngModel)]="newQuestionAction.answer"></textarea>

                                <!-- return to list if last stage -->
                                <span *ngIf="slowLookingMaximumScriptStageIndex == i">
                                    <div class="text-center">
                                        <button class="m-3 btn btn-warning" (click)="slowLookingScript=0; addActionToActivity(newQuestionAction); resetNewQuestionAction();">Return to the list of Slow Looking activities</button>
                                    </div>
                                </span>
                                <!-- continue if not last stage -->
                                <span *ngIf="slowLookingMaximumScriptStageIndex != i">
                                    <div class="text-right">
                                        <button class="m-3 btn btn-warning" (click)="slowLookingCurrentScriptStageIndex=i+1; addActionToActivity(newQuestionAction); resetNewQuestionAction(); showQuestionHelp=false;">Continue</button>
                                    </div>
                                </span>
                            </div>
                        </div>   
                        <div *ngIf="stage.type == 'shareWithMuseum'">  
                            <div class="form-group">
                                {{intialiseShareWithMuseumAction(stage)}}
                                <h5>{{stage.title}}</h5>
                                <p>{{stage.body}}</p>
                            </div>
                            <div class="form-check">
                                <input
                                    type="radio"
                                    [value]=true
                                    name="share"
                                    [(ngModel)] = "newShareWithMusemAction.share"
                                    checked
                                />
                                <label class="form-check-label" for="flexRadioDefault2"> agree </label>
                            </div>
                            <div class="form-check">
                                <input
                                    type="radio"
                                    [value]=false
                                    name="share"
                                    [(ngModel)] = "newShareWithMusemAction.share"
                              />
                              <label class="form-check-label" for="flexRadioDefault1"> disagree </label>
                            </div>

                            <span *ngIf="slowLookingMaximumScriptStageIndex == i">
                                <div class="text-center">
                                    <button class="m-3 btn btn-warning" (click)="slowLookingScript=0; addActionToActivity(newShareWithMusemAction); resetNewShareWithMusemAction();">Return to the list of Slow Looking activities</button>
                                </div>
                            </span>
                            <span *ngIf="slowLookingMaximumScriptStageIndex != i">
                                <div class="text-right">
                                    <button class="m-3 btn btn-warning" (click)="slowLookingCurrentScriptStageIndex=i+1; addActionToActivity(newShareWithMusemAction); resetNewShareWithMusemAction();">Continue</button>
                                </div>
                            </span>
                        </div>
                        <div *ngIf="stage.type == 'follow'">  
                            <div class="form-group">
                                {{intialiseFollowAction(stage)}}
                                <h5>{{stage.title}}</h5>
                                <p>{{stage.body}}</p>
                                <div class="form-group">
                                    <label for="emailaddress">Your email address:</label>
                                    <textarea id="emailaddress" rows="1" class="form-control" [(ngModel)]="newFollowAction.emailAddress"></textarea>
                                </div>
                            </div>
                            <span *ngIf="slowLookingMaximumScriptStageIndex == i">
                                <div class="text-center">
                                    <button class="m-3 btn btn-warning" (click)="slowLookingScript=0; addActionToActivity(newFollowAction); resetFollowAction();">Return to the list of Slow Looking activities</button>
                                </div>
                            </span>
                            <span *ngIf="slowLookingMaximumScriptStageIndex != i">
                                <div class="text-right">
                                    <button class="m-3 btn btn-warning" (click)="slowLookingCurrentScriptStageIndex=i+1; addActionToActivity(newFollowAction); resetFollowAction();">Continue</button>
                                </div>
                            </span>
                        </div>
                        <div *ngIf="stage.type == 'shareWithSomeone'">  
                            <div class="form-group">
                                {{intialiseShareWithSomeoneAction(stage)}}
                                <h5>{{stage.title}}</h5>
                                <p>{{stage.body}}</p>
                                <div class="form-group">
                                    <label for="emailaddress">Their email address:</label>
                                    <textarea id="emailaddress" rows="1" class="form-control" [(ngModel)]="newShareWithFriendAction.emailAddress"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="emailaddress">Message:</label>
                                    <textarea id="emailaddress" rows="5" class="form-control" [(ngModel)]="newShareWithFriendAction.message"></textarea>
                                </div>
                            </div>
                            <span *ngIf="slowLookingMaximumScriptStageIndex == i">
                                <div class="text-center">
                                    <button class="m-3 btn btn-warning" (click)="slowLookingScript=0; addActionToActivity(newShareWithFriendAction); resetShareWithSomeoneAction();">Return to the list of Slow Looking activities</button>
                                </div>
                            </span>
                            <span *ngIf="slowLookingMaximumScriptStageIndex != i">
                                <div class="text-right">
                                    <button class="m-3 btn btn-warning" (click)="slowLookingCurrentScriptStageIndex=i+1;  addActionToActivity(newShareWithFriendAction); resetShareWithSomeoneAction();">Continue</button>
                                </div>
                            </span>
                        </div>
                        <div *ngIf="stage.type == 'thankyou'">  
                            <h5>{{stage.title}}</h5>
                            <p>{{stage.body}}</p>
                            <div>
                                [Social media butons to be added here]<br/>                            
                            </div>
                            <span *ngIf="slowLookingMaximumScriptStageIndex == i">
                                <div class="text-center">
                                    <button class="m-3 btn btn-warning" (click)="slowLookingScript=0; addActivity();">Return to the list of Slow Looking activities</button>
                                </div>
                            </span>
                            <span *ngIf="slowLookingMaximumScriptStageIndex != i">
                                <div class="text-right">
                                    <button class="m-3 btn btn-warning" (click)="slowLookingCurrentScriptStageIndex=i+1; ">Continue</button>
                                </div>
                            </span>
                        </div>
                    </div>
                </div> 
            </div>
        </div>
        <div *ngSwitchCase="2">
            <paContributionManagement></paContributionManagement>
        </div> 
        <div *ngSwitchCase="3">
            <paOtherPeople></paOtherPeople>
        </div> 
        <div *ngSwitchCase="4">
            <paScriptAuthoring></paScriptAuthoring>
        </div> 
        <div *ngSwitchDefault>
            <paThemeTable></paThemeTable>
        </div>
    </div>
  </div> 