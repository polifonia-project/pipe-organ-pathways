{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nlet OverviewComponent = class OverviewComponent {\n  constructor(model, activatedRoute) {\n    this.model = model;\n    this.activatedRoute = activatedRoute;\n    this.artworkResults = [];\n    this.themeResults = [];\n    this.scriptResults = [];\n  }\n\n  ngOnInit() {\n    const scripts = this.activatedRoute.snapshot.data.model1;\n    const artworks = this.activatedRoute.snapshot.data.model2;\n    const themes = this.activatedRoute.snapshot.data.model3;\n\n    for (var script of scripts) {\n      if (script.visible) {\n        //add to the artwork result array\n        for (var artworkid of script.artworkids) {\n          let artind = artworks.findIndex(x => x._id == artworkid);\n\n          if (artind > -1) {\n            let artresind = this.artworkResults.findIndex(x => x.artworkurl == artworks[artind].url);\n\n            if (artresind > -1) {\n              this.artworkResults[artresind].scripts.push(script);\n            } else {\n              this.artworkResults.push({\n                artworkurl: artworks[artind].url,\n                name: artworks[artind].name,\n                artist: artworks[artind].artist,\n                year: artworks[artind].year,\n                searchstring: artworks[artind].name + \", \" + artworks[artind].artist + \", \" + artworks[artind].year,\n                scripts: [script]\n              });\n            }\n          }\n        } //add to the theme result array\n\n\n        for (var themeid of script.themeids) {\n          let themeresind = this.themeResults.findIndex(x => x.themeid == themeid);\n\n          if (themeresind > -1) {\n            this.themeResults[themeresind].scripts.push(script);\n          } else {\n            let themeind = themes.findIndex(x => x._id == themeid);\n\n            if (themeind > -1) {\n              this.themeResults.push({\n                themeid: themeid,\n                name: themes[themeind].name,\n                description: themes[themeind].description,\n                searchstring: themes[themeind].name + \": \" + themes[themeind].description,\n                scripts: [script]\n              });\n            }\n          }\n        } //add to the script result array\n\n\n        this.scriptResults.push({\n          searchstring: script.name + \": \" + script.description + \" - \" + script.author,\n          script: script\n        });\n      }\n    }\n\n    console.log(this.artworkResults);\n    console.log(this.themeResults);\n    console.log(this.scriptResults);\n  }\n\n  foo() {\n    console.log(this.artworkResults);\n    console.log(this.themeResults);\n    console.log(this.scriptResults);\n  }\n\n  getScriptOverviewData() {\n    console.log(\"hello\");\n    const scripts = this.model.getScripts();\n    const artworks = this.model.getArtworks();\n    const themes = this.model.getThemes();\n\n    for (var script of scripts) {\n      if (script.visible) {\n        //add to the artwork result array\n        for (var artworkid of script.artworkids) {\n          let artind = artworks.findIndex(x => x._id == artworkid);\n\n          if (artind > -1) {\n            let artresind = this.artworkResults.findIndex(x => x.artworkurl == artworks[artind].url);\n\n            if (artresind > -1) {\n              this.artworkResults[artresind].scripts.push(script);\n            } else {\n              this.artworkResults.push({\n                artworkurl: artworks[artind].url,\n                name: artworks[artind].name,\n                artist: artworks[artind].artist,\n                year: artworks[artind].year,\n                searchstring: artworks[artind].name + \", \" + artworks[artind].artist + \", \" + artworks[artind].year,\n                scripts: [script]\n              });\n            }\n          }\n        } //add to the theme result array\n\n\n        for (var themeid of script.themeids) {\n          let themeresind = this.themeResults.findIndex(x => x.themeid == themeid);\n\n          if (themeresind > -1) {\n            this.themeResults[themeresind].scripts.push(script);\n          } else {\n            let themeind = themes.findIndex(x => x._id == themeid);\n\n            if (themeind > -1) {\n              this.themeResults.push({\n                themeid: themeid,\n                name: themes[themeind].name,\n                description: themes[themeind].description,\n                searchstring: themes[themeind].name + \": \" + themes[themeind].description,\n                scripts: [script]\n              });\n            }\n          }\n        } //add to the script result array\n\n\n        this.scriptResults.push({\n          searchstring: script.name + \": \" + script.description + \" - \" + script.author,\n          script: script\n        });\n      }\n    }\n\n    console.log(this.artworkResults);\n    console.log(this.themeResults);\n    console.log(this.scriptResults);\n  }\n\n};\nOverviewComponent = __decorate([Component({\n  selector: \"paOverview\",\n  templateUrl: \"overview.component.html\"\n})], OverviewComponent);\nexport { OverviewComponent };","map":null,"metadata":{},"sourceType":"module"}