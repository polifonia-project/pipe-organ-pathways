{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./repository.model\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\n\nfunction OverviewComponent_div_8_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelement(1, \"span\", 8)(2, \"span\", 8);\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const artwork_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", artwork_r4.name, i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", artwork_r4.artist, i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(artwork_r4.year);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(artwork_r4.url);\n  }\n}\n\nfunction OverviewComponent_div_8_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\")(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const theme_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(theme_r5.name);\n  }\n}\n\nfunction OverviewComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, OverviewComponent_div_8_span_7_Template, 7, 4, \"span\", 6);\n    i0.ɵɵtemplate(8, OverviewComponent_div_8_span_8_Template, 3, 1, \"span\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const script_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(script_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(script_r1.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(script_r1.author);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.getArtworkFromId(script_r1.homepageartworkid));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.getThemesFromIds(script_r1.themeids));\n  }\n}\n\nexport let OverviewComponent = /*#__PURE__*/(() => {\n  class OverviewComponent {\n    constructor(model, activatedRoute) {\n      this.model = model;\n      this.activatedRoute = activatedRoute;\n      this.artworkResults = [];\n      this.themeResults = [];\n      this.scriptResults = [];\n      this.firstScripts = [];\n      this.images = [944, 1011, 984].map(n => `https://picsum.photos/id/${n}/900/500`);\n    }\n\n    ngOnInit() {\n      this.scripts = this.activatedRoute.snapshot.data.model1;\n      this.artworks = this.activatedRoute.snapshot.data.model2;\n      this.themes = this.activatedRoute.snapshot.data.model3;\n\n      for (var script of this.scripts) {\n        if (script.visible) {\n          //add to the artwork result array\n          for (var artworkid of script.artworkids) {\n            let artind = this.artworks.findIndex(x => x._id == artworkid);\n\n            if (artind > -1) {\n              let artresind = this.artworkResults.findIndex(x => x.artworkurl == this.artworks[artind].url);\n\n              if (artresind > -1) {\n                this.artworkResults[artresind].scripts.push(script);\n              } else {\n                this.artworkResults.push({\n                  artworkurl: this.artworks[artind].url,\n                  name: this.artworks[artind].name,\n                  artist: this.artworks[artind].artist,\n                  year: this.artworks[artind].year,\n                  searchstring: this.artworks[artind].name + \", \" + this.artworks[artind].artist + \", \" + this.artworks[artind].year,\n                  scripts: [script]\n                });\n              }\n            }\n          } //add to the theme result array\n\n\n          for (var themeid of script.themeids) {\n            let themeresind = this.themeResults.findIndex(x => x.themeid == themeid);\n\n            if (themeresind > -1) {\n              this.themeResults[themeresind].scripts.push(script);\n            } else {\n              let themeind = this.themes.findIndex(x => x._id == themeid);\n\n              if (themeind > -1) {\n                this.themeResults.push({\n                  themeid: themeid,\n                  name: this.themes[themeind].name,\n                  description: this.themes[themeind].description,\n                  searchstring: this.themes[themeind].name + \": \" + this.themes[themeind].description,\n                  scripts: [script]\n                });\n              }\n            }\n          } //add to the script result array\n\n\n          this.scriptResults.push({\n            searchstring: script.name + \": \" + script.description + \" - \" + script.author,\n            script: script\n          });\n        }\n      } //get random scripts for feature\n\n\n      let shuffled = this.scriptResults.map(value => ({\n        value,\n        sort: Math.random()\n      })).sort((a, b) => a.sort - b.sort).map(({\n        value\n      }) => value);\n\n      for (var scr of shuffled.slice(0, 5)) {\n        this.firstScripts.push(scr.script);\n      }\n\n      console.log(this.artworkResults);\n      console.log(this.themeResults);\n      console.log(this.scriptResults);\n    }\n\n    foo() {\n      console.log(this.artworkResults);\n      console.log(this.themeResults);\n      console.log(this.scriptResults);\n      console.log(this.firstScripts);\n    }\n\n    getArtworkFromId(_id) {\n      let ind = this.artworks.findIndex(x => x._id == _id);\n\n      if (ind > -1) {\n        return [this.artworks[ind]];\n      } else {\n        return [];\n      }\n    }\n\n    getThemesFromIds(_ids) {\n      let themes = [];\n\n      for (var _id of _ids) {\n        let ind = this.themes.findIndex(x => x._id == _id);\n\n        if (ind > -1) {\n          themes.push(this.themes[ind]);\n        }\n      }\n\n      return themes;\n    }\n\n    getScriptOverviewData() {\n      console.log(\"hello\");\n      const scripts = this.model.getScripts();\n      const artworks = this.model.getArtworks();\n      const themes = this.model.getThemes();\n\n      for (var script of scripts) {\n        if (script.visible) {\n          //add to the artwork result array\n          for (var artworkid of script.artworkids) {\n            let artind = artworks.findIndex(x => x._id == artworkid);\n\n            if (artind > -1) {\n              let artresind = this.artworkResults.findIndex(x => x.artworkurl == artworks[artind].url);\n\n              if (artresind > -1) {\n                this.artworkResults[artresind].scripts.push(script);\n              } else {\n                this.artworkResults.push({\n                  artworkurl: artworks[artind].url,\n                  name: artworks[artind].name,\n                  artist: artworks[artind].artist,\n                  year: artworks[artind].year,\n                  searchstring: artworks[artind].name + \", \" + artworks[artind].artist + \", \" + artworks[artind].year,\n                  scripts: [script]\n                });\n              }\n            }\n          } //add to the theme result array\n\n\n          for (var themeid of script.themeids) {\n            let themeresind = this.themeResults.findIndex(x => x.themeid == themeid);\n\n            if (themeresind > -1) {\n              this.themeResults[themeresind].scripts.push(script);\n            } else {\n              let themeind = themes.findIndex(x => x._id == themeid);\n\n              if (themeind > -1) {\n                this.themeResults.push({\n                  themeid: themeid,\n                  name: themes[themeind].name,\n                  description: themes[themeind].description,\n                  searchstring: themes[themeind].name + \": \" + themes[themeind].description,\n                  scripts: [script]\n                });\n              }\n            }\n          } //add to the script result array\n\n\n          this.scriptResults.push({\n            searchstring: script.name + \": \" + script.description + \" - \" + script.author,\n            script: script\n          });\n        }\n      }\n\n      console.log(this.artworkResults);\n      console.log(this.themeResults);\n      console.log(this.scriptResults);\n    }\n\n  }\n\n  OverviewComponent.ɵfac = function OverviewComponent_Factory(t) {\n    return new (t || OverviewComponent)(i0.ɵɵdirectiveInject(i1.Model), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n\n  OverviewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OverviewComponent,\n    selectors: [[\"paOverview\"]],\n    decls: 45,\n    vars: 26,\n    consts: [[\"id\", \"accordionExample\", 1, \"accordion\"], [1, \"accordion-item\"], [1, \"accordion-header\", 3, \"id\"], [\"type\", \"button\", \"data-bs-toggle\", \"collapse\", \"aria-expanded\", \"true\", 1, \"accordion-button\", \"text-white\", 2, \"background-color\", \"rgb(41, 161, 184)\"], [1, \"accordion-collapse\", \"collapse\", \"show\", \"text-white\", 2, \"background-color\", \"black\", 3, \"id\"], [1, \"accordion-body\"], [4, \"ngFor\", \"ngForOf\"], [1, \"accordion-collapse\", \"collapse\", \"text-white\", 2, \"background-color\", \"black\", 3, \"id\"], [2, \"white-space\", \"pre-wrap\", 3, \"innerHTML\"]],\n    template: function OverviewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2)(3, \"button\", 3)(4, \"h5\");\n        i0.ɵɵtext(5, \"Featured\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\", 4)(7, \"div\", 5);\n        i0.ɵɵtemplate(8, OverviewComponent_div_8_Template, 9, 5, \"div\", 6);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(9, \"div\", 1)(10, \"h2\", 2)(11, \"button\", 3)(12, \"h5\");\n        i0.ɵɵtext(13, \"Exhibitions\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 7)(15, \"div\", 5)(16, \"p\");\n        i0.ɵɵtext(17, \"adasds\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(18, \"div\", 1)(19, \"h2\", 2)(20, \"button\", 3)(21, \"h5\");\n        i0.ɵɵtext(22, \"Artworks\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"div\", 7)(24, \"div\", 5)(25, \"p\");\n        i0.ɵɵtext(26, \"adasds\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(27, \"div\", 1)(28, \"h2\", 2)(29, \"button\", 3)(30, \"h5\");\n        i0.ɵɵtext(31, \"Themes\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(32, \"div\", 7)(33, \"div\", 5)(34, \"p\");\n        i0.ɵɵtext(35, \"adasds\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(36, \"div\", 1)(37, \"h2\", 2)(38, \"button\", 3)(39, \"h5\");\n        i0.ɵɵtext(40, \"Explore\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(41, \"div\", 7)(42, \"div\", 5)(43, \"p\");\n        i0.ɵɵtext(44, \"adasds\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"id\", \"heading1\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵattribute(\"data-bs-target\", \"#collapse1\")(\"aria-controls\", \"collapse1\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"id\", \"collapse1\");\n        i0.ɵɵattribute(\"aria-labelledby\", \"heading1\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.firstScripts);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"id\", \"heading2\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵattribute(\"data-bs-target\", \"#collapse2\")(\"aria-controls\", \"collapse2\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"id\", \"collapse2\");\n        i0.ɵɵattribute(\"aria-labelledby\", \"heading2\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"id\", \"heading3\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵattribute(\"data-bs-target\", \"#collapse3\")(\"aria-controls\", \"collapse3\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"id\", \"collapse3\");\n        i0.ɵɵattribute(\"aria-labelledby\", \"heading3\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"id\", \"heading4\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵattribute(\"data-bs-target\", \"#collapse4\")(\"aria-controls\", \"collapse4\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"id\", \"collapse4\");\n        i0.ɵɵattribute(\"aria-labelledby\", \"heading4\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"id\", \"heading5\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵattribute(\"data-bs-target\", \"#collapse5\")(\"aria-controls\", \"collapse5\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"id\", \"collapse5\");\n        i0.ɵɵattribute(\"aria-labelledby\", \"heading5\");\n      }\n    },\n    dependencies: [i3.NgForOf],\n    encapsulation: 2\n  });\n  return OverviewComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}